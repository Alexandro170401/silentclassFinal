{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./Notas.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Notas(){const[evaluaciones,setEvaluaciones]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Recuperar el usuarioId de localStorage\nconst usuarioId=localStorage.getItem('usuarioId');console.log('usuarioId:',usuarioId);// Verificar si se obtiene correctamente\nuseEffect(()=>{if(!usuarioId){setError('Usuario no identificado');setLoading(false);return;}fetchEvaluaciones();},[usuarioId]);const fetchEvaluaciones=async()=>{try{const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/api/evaluaciones.php?usuarioId=\").concat(usuarioId));console.log(\"\".concat(process.env.REACT_APP_API_URL,\"/api/evaluaciones.php?usuarioId=\").concat(usuarioId));if(!response.ok){throw new Error('Error al obtener las evaluaciones');}const data=await response.json();console.log('Evaluaciones recibidas:',data);if(Array.isArray(data)){setEvaluaciones(data);// Si es un arreglo, actualiza el estado\n}else{console.log('Mensaje de error:',data.message);// Verificar el mensaje de error\nsetEvaluaciones([]);// Si no es un arreglo, usa un arreglo vacío para evitar errores\n}setLoading(false);}catch(error){console.error('Error al cargar evaluaciones:',error);setError('Error al cargar las evaluaciones');setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Cargando evaluaciones...\"});}if(error){return/*#__PURE__*/_jsx(\"p\",{children:error});}return/*#__PURE__*/_jsx(\"div\",{className:\"evaluaciones-container\",children:evaluaciones.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No hay evaluaciones disponibles\"}):evaluaciones.map(evaluacion=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:evaluacion.curso}),evaluacion.especialidad==='Matematicas'&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notas Matem\\xE1ticas:\"}),\" \",evaluacion.nota_matematicas!==null?evaluacion.nota_matematicas:'Falta realizar examen']}),evaluacion.especialidad==='Lenguaje'&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nota Lenguaje:\"}),\" \",evaluacion.nota_lenguaje!==null?evaluacion.nota_lenguaje:'Falta realizar examen']}),evaluacion.especialidad==='Historia'&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nota Historia:\"}),\" \",evaluacion.nota_historia!==null?evaluacion.nota_historia:'Falta realizar examen']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Fecha:\"}),\" \",evaluacion.fecha?new Date(evaluacion.fecha).toLocaleDateString():'No disponible']})]},evaluacion.id))});}export default Notas;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Notas","evaluaciones","setEvaluaciones","loading","setLoading","error","setError","usuarioId","localStorage","getItem","console","log","fetchEvaluaciones","response","fetch","concat","process","env","REACT_APP_API_URL","ok","Error","data","json","Array","isArray","message","children","className","length","map","evaluacion","curso","especialidad","nota_matematicas","nota_lenguaje","nota_historia","fecha","Date","toLocaleDateString","id"],"sources":["C:/Users/HP/Desktop/Proyecto_Alexandro/Version hibrida (local-web)/silent-class/src/components/Notas.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './Notas.css';\r\n\r\nfunction Notas() {\r\n  const [evaluaciones, setEvaluaciones] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Recuperar el usuarioId de localStorage\r\n  const usuarioId = localStorage.getItem('usuarioId');\r\n  console.log('usuarioId:', usuarioId);  // Verificar si se obtiene correctamente\r\n\r\n  useEffect(() => {\r\n    if (!usuarioId) {\r\n      setError('Usuario no identificado');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    fetchEvaluaciones();\r\n  }, [usuarioId]);\r\n\r\n  const fetchEvaluaciones = async () => {\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/evaluaciones.php?usuarioId=${usuarioId}`);\r\n      console.log(`${process.env.REACT_APP_API_URL}/api/evaluaciones.php?usuarioId=${usuarioId}`);\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Error al obtener las evaluaciones');\r\n      }\r\n      const data = await response.json();\r\n      console.log('Evaluaciones recibidas:', data);\r\n\r\n      if (Array.isArray(data)) {\r\n        setEvaluaciones(data);  // Si es un arreglo, actualiza el estado\r\n      } else {\r\n        console.log('Mensaje de error:', data.message);  // Verificar el mensaje de error\r\n        setEvaluaciones([]);  // Si no es un arreglo, usa un arreglo vacío para evitar errores\r\n      }\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error al cargar evaluaciones:', error);\r\n      setError('Error al cargar las evaluaciones');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <p>Cargando evaluaciones...</p>;\r\n  }\r\n\r\n  if (error) {\r\n    return <p>{error}</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"evaluaciones-container\">\r\n      {evaluaciones.length === 0 ? (\r\n        <p>No hay evaluaciones disponibles</p>\r\n      ) : (\r\n        evaluaciones.map((evaluacion) => (\r\n          <div className=\"card\" key={evaluacion.id}>\r\n            <h3>{evaluacion.curso}</h3>\r\n\r\n            {/* Mostrar solo la nota correspondiente a la especialidad */}\r\n            {evaluacion.especialidad === 'Matematicas' && (\r\n              <p><strong>Notas Matemáticas:</strong> {evaluacion.nota_matematicas !== null ? evaluacion.nota_matematicas : 'Falta realizar examen'}</p>\r\n            )}\r\n\r\n            {evaluacion.especialidad === 'Lenguaje' && (\r\n              <p><strong>Nota Lenguaje:</strong> {evaluacion.nota_lenguaje !== null ? evaluacion.nota_lenguaje : 'Falta realizar examen'}</p>\r\n            )}\r\n\r\n            {evaluacion.especialidad === 'Historia' && (\r\n              <p><strong>Nota Historia:</strong> {evaluacion.nota_historia !== null ? evaluacion.nota_historia : 'Falta realizar examen'}</p>\r\n            )}\r\n\r\n            <p><strong>Fecha:</strong> {evaluacion.fecha ? new Date(evaluacion.fecha).toLocaleDateString() : 'No disponible'}</p>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Notas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}